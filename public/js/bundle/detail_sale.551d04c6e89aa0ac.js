"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2416],{31424:(t,s,e)=>{e.r(s),e.d(s,{default:()=>o});var a=e(20629),n=e(74865),i=e.n(n);const r={computed:(0,a.Se)(["currentUserPermissions","currentUser"]),metaInfo:{title:"Detail Sale"},data:function(){return{isLoading:!0,sale:{},details:[],variants:[],company:{},email:{to:"",subject:"",message:"",client_name:"",Sale_Ref:""}}},methods:{Sale_PDF:function(){var t=this;i().start(),i().set(.1);var s=this.$route.params.id;axios.get("sale_pdf/".concat(s),{responseType:"blob",headers:{"Content-Type":"application/json"}}).then((function(s){var e=window.URL.createObjectURL(new Blob([s.data])),a=document.createElement("a");a.href=e,a.setAttribute("download","Sale_"+t.sale.Ref+".pdf"),document.body.appendChild(a),a.click(),setTimeout((function(){return i().done()}),500)})).catch((function(){setTimeout((function(){return i().done()}),500)}))},makeToast:function(t,s,e){this.$root.$bvToast.toast(s,{title:e,variant:t,solid:!0})},formatNumber:function(t,s){var e=("string"==typeof t?t:t.toString()).split(".");if(s<=0)return e[0];var a=e[1]||"";if(a.length>s)return"".concat(e[0],".").concat(a.substr(0,s));for(;a.length<s;)a+="0";return"".concat(e[0],".").concat(a)},print:function(){this.$htmlToPaper("print_Invoice")},Send_Email:function(){var t=this;i().start(),i().set(.1);var s=this.$route.params.id;axios.post("sales_send_email",{id:s}).then((function(s){setTimeout((function(){return i().done()}),500),t.makeToast("success",t.$t("Send.TitleEmail"),t.$t("Success"))})).catch((function(s){setTimeout((function(){return i().done()}),500),t.makeToast("danger",t.$t("SMTPIncorrect"),t.$t("Failed"))}))},Sale_SMS:function(){var t=this;i().start(),i().set(.1);var s=this.$route.params.id;axios.post("sales_send_sms",{id:s}).then((function(s){setTimeout((function(){return i().done()}),500),t.makeToast("success",t.$t("Send_SMS"),t.$t("Success"))})).catch((function(s){setTimeout((function(){return i().done()}),500),t.makeToast("danger",t.$t("sms_config_invalid"),t.$t("Failed"))}))},Get_Details:function(){var t=this,s=this.$route.params.id;axios.get("sales/".concat(s)).then((function(s){t.sale=s.data.sale,t.details=s.data.details,t.company=s.data.company,t.isLoading=!1})).catch((function(s){setTimeout((function(){t.isLoading=!1}),500)}))},Delete_Sale:function(){var t=this,s=this.$route.params.id;this.$swal({title:this.$t("Delete.Title"),text:this.$t("Delete.Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete.cancelButtonText"),confirmButtonText:this.$t("Delete.confirmButtonText")}).then((function(e){e.value&&axios.delete("sales/"+s).then((function(){t.$swal(t.$t("Delete.Deleted"),t.$t("Delete.SaleDeleted"),"success"),t.$router.push({name:"index_sales"})})).catch((function(){t.$swal(t.$t("Delete.Failed"),t.$t("Delete.Therewassomethingwronge"),"warning")}))}))}},created:function(){this.Get_Details()}};const o=(0,e(51900).Z)(r,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("SaleDetail"),folder:t.$t("Sales")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("b-card",[e("b-row",[e("b-col",{staticClass:"mb-5",attrs:{md:"12"}},[t.currentUserPermissions&&t.currentUserPermissions.includes("Sales_edit")&&"no"==t.sale.sale_has_return?e("router-link",{staticClass:"btn btn-success btn-icon ripple btn-sm",attrs:{title:"Edit",to:{name:"edit_sale",params:{id:t.$route.params.id}}}},[e("i",{staticClass:"i-Edit"}),t._v(" "),e("span",[t._v(t._s(t.$t("EditSale")))])]):t._e(),t._v(" "),e("button",{staticClass:"btn btn-info btn-icon ripple btn-sm",on:{click:function(s){return t.Send_Email()}}},[e("i",{staticClass:"i-Envelope-2"}),t._v("\n          "+t._s(t.$t("Email"))+"\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-secondary btn-icon ripple btn-sm",on:{click:function(s){return t.Sale_SMS()}}},[e("i",{staticClass:"i-Speach-Bubble"}),t._v("\n          SMS\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-icon ripple btn-sm",on:{click:function(s){return t.Sale_PDF()}}},[e("i",{staticClass:"i-File-TXT"}),t._v("\n          PDF\n        ")]),t._v(" "),e("button",{staticClass:"btn btn-warning btn-icon ripple btn-sm",on:{click:function(s){return t.print()}}},[e("i",{staticClass:"i-Billing"}),t._v("\n          "+t._s(t.$t("print"))+"\n        ")]),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("Sales_delete")&&"no"==t.sale.sale_has_return?e("button",{staticClass:"btn btn-danger btn-icon ripple btn-sm",on:{click:function(s){return t.Delete_Sale()}}},[e("i",{staticClass:"i-Close-Window"}),t._v("\n          "+t._s(t.$t("Del"))+"\n        ")]):t._e()],1)],1),t._v(" "),e("div",{staticClass:"invoice",attrs:{id:"print_Invoice"}},[e("div",{staticClass:"invoice-print"},[e("b-row",{staticClass:"justify-content-md-center"},[e("h4",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("SaleDetail"))+" : "+t._s(t.sale.Ref))])]),t._v(" "),e("hr"),t._v(" "),e("b-row",{staticClass:"mt-5"},[e("b-col",{staticClass:"mb-4",attrs:{lg:"4",md:"4",sm:"12"}},[e("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Customer_Info")))]),t._v(" "),e("div",[t._v(t._s(t.sale.client_name))]),t._v(" "),e("div",[t._v(t._s(t.sale.client_email))]),t._v(" "),e("div",[t._v(t._s(t.sale.client_phone))]),t._v(" "),e("div",[t._v(t._s(t.sale.client_adr))])]),t._v(" "),e("b-col",{staticClass:"mb-4",attrs:{lg:"4",md:"4",sm:"12"}},[e("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Company_Info")))]),t._v(" "),e("div",[t._v(t._s(t.company.CompanyName))]),t._v(" "),e("div",[t._v(t._s(t.company.email))]),t._v(" "),e("div",[t._v(t._s(t.company.CompanyPhone))]),t._v(" "),e("div",[t._v(t._s(t.company.CompanyAdress))])]),t._v(" "),e("b-col",{staticClass:"mb-4",attrs:{lg:"4",md:"4",sm:"12"}},[e("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Invoice_Info")))]),t._v(" "),e("div",[t._v(t._s(t.$t("Reference"))+" : "+t._s(t.sale.Ref))]),t._v(" "),e("div",[t._v("\n              "+t._s(t.$t("PaymentStatus"))+" :\n              "),"paid"==t.sale.payment_status?e("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(t.$t("Paid")))]):"partial"==t.sale.payment_status?e("span",{staticClass:"badge badge-outline-primary"},[t._v(t._s(t.$t("partial")))]):e("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.$t("Unpaid")))])]),t._v(" "),e("div",[t._v(t._s(t.$t("warehouse"))+" : "+t._s(t.sale.warehouse))]),t._v(" "),e("div",[t._v("\n              "+t._s(t.$t("Status"))+" :\n              "),"completed"==t.sale.statut?e("span",{staticClass:"badge badge-outline-success"},[t._v(t._s(t.$t("complete")))]):"pending"==t.sale.statut?e("span",{staticClass:"badge badge-outline-info"},[t._v(t._s(t.$t("Pending")))]):e("span",{staticClass:"badge badge-outline-warning"},[t._v(t._s(t.$t("Ordered")))])])])],1),t._v(" "),e("b-row",{staticClass:"mt-3"},[e("b-col",{attrs:{md:"12"}},[e("h5",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Order_Summary")))]),t._v(" "),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover table-md"},[e("thead",{staticClass:"bg-gray-300"},[e("tr",[e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("ProductName")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Net_Unit_Price")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Quantity")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("UnitPrice")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Discount")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Tax")))]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("SubTotal")))])])]),t._v(" "),e("tbody",t._l(t.details,(function(s){return e("tr",[e("td",[e("span",[t._v(t._s(s.code)+" ("+t._s(s.name)+")")]),t._v(" "),e("p",{directives:[{name:"show",rawName:"v-show",value:s.is_imei&&null!==s.imei_number,expression:"detail.is_imei && detail.imei_number !==null "}]},[t._v(t._s(t.$t("IMEI_SN"))+" : "+t._s(s.imei_number))])]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(s.Net_price,3)))]),t._v(" "),e("td",[t._v(t._s(t.formatNumber(s.quantity,2))+" "+t._s(s.unit_sale))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(s.price,2)))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(s.DiscountNet,2)))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.formatNumber(s.taxe,2)))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(s.total.toFixed(2)))])])})),0)])])]),t._v(" "),e("div",{staticClass:"offset-md-9 col-md-3 mt-4"},[e("table",{staticClass:"table table-striped table-sm"},[e("tbody",[e("tr",[e("td",[t._v(t._s(t.$t("OrderTax")))]),t._v(" "),e("td",[e("span",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.TaxNet.toFixed(2))+" ("+t._s(t.formatNumber(t.sale.tax_rate,2))+" %)")])])]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.$t("Discount")))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.discount.toFixed(2)))])]),t._v(" "),e("tr",[e("td",[t._v(t._s(t.$t("Shipping")))]),t._v(" "),e("td",[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.shipping.toFixed(2)))])]),t._v(" "),e("tr",[e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Total")))])]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.GrandTotal))])])]),t._v(" "),e("tr",[e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Paid")))])]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.paid_amount))])])]),t._v(" "),e("tr",[e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("Due")))])]),t._v(" "),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.currentUser.currency)+" "+t._s(t.sale.due))])])])])])])],1),t._v(" "),e("hr",{directives:[{name:"show",rawName:"v-show",value:t.sale.note,expression:"sale.note"}]}),t._v(" "),e("b-row",{staticClass:"mt-4"},[e("b-col",{attrs:{md:"12"}},[e("p",[t._v(t._s(t.$t("sale_note"))+" : "+t._s(t.sale.note))])])],1)],1)])],1)],1)}),[],!1,null,null,null).exports}}]);